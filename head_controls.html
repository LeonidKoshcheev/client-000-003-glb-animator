<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ–≤–æ–π –º–æ–¥–µ–ª–∏</title>
    <style>
      /* –°–±—Ä–æ—Å –æ—Ç—Å—Ç—É–ø–æ–≤ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–≥–æ —Ñ–æ–Ω–∞ */
      body {
        margin: 0;
        background: linear-gradient(to bottom, #000A25, #000A25);
        font-family: Arial, sans-serif;
      }
      
      /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã —É canvas */
      canvas {
        display: block;
      }
      
      /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
      .controls {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      
      .control-btn {
        padding: 15px 20px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        border: 2px solid #4a90e2;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        transition: all 0.3s ease;
        min-width: 250px;
      }
      
      .control-btn:hover {
        background: rgba(74, 144, 226, 0.4);
        border-color: #fff;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
      }
      
      .control-btn.active {
        background: rgba(74, 144, 226, 0.7);
        border-color: #fff;
        box-shadow: 0 0 20px rgba(74, 144, 226, 0.5);
      }
      
      .status-indicator {
        padding: 15px 20px;
        background: rgba(0, 255, 0, 0.2);
        color: #00ff00;
        border: 2px solid #00ff00;
        border-radius: 8px;
        font-size: 16px;
        text-align: center;
        margin-top: 20px;
        font-weight: bold;
      }
      
      .status-indicator.paused {
        background: rgba(255, 0, 0, 0.2);
        color: #ff0000;
        border-color: #ff0000;
      }
      
      .title {
        color: white;
        text-align: center;
        margin: 20px 0;
        font-size: 24px;
        font-weight: bold;
        text-shadow: 0 0 10px rgba(74, 144, 226, 0.5);
      }
    </style>
  </head>
  <body>
    <h1 class="title">üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ–≤–æ–π –º–æ–¥–µ–ª–∏</h1>
    
    <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="controls">
      <button class="control-btn" onclick="resetHeadPosition()">üìç –°–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–∏ –≥–æ–ª–æ–≤—ã</button>
      <button class="control-btn" onclick="hideGroup('Golova')">üëª –°–∫—Ä—ã—Ç—å –≥—Ä—É–ø–ø—É "Golova"</button>
      <button class="control-btn" onclick="hideGroup('Body')">üëª –°–∫—Ä—ã—Ç—å –≥—Ä—É–ø–ø—É "Body"</button>
      <button class="control-btn" onclick="hideGroup('Arms')">üëª –°–∫—Ä—ã—Ç—å –≥—Ä—É–ø–ø—É "Arms"</button>
      <button class="control-btn" onclick="hideGroup('Legs')">üëª –°–∫—Ä—ã—Ç—å –≥—Ä—É–ø–ø—É "Legs"</button>
      <button class="control-btn" onclick="restoreAllGroups()">üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –≥—Ä—É–ø–ø—ã</button>
      <button class="control-btn" onclick="analyzeGroups()">üîç –ê–Ω–∞–ª–∏–∑ –≥—Ä—É–ø–ø</button>
      <button class="control-btn" onclick="testModules()">üß™ –¢–µ—Å—Ç –º–æ–¥—É–ª–µ–π</button>
      <div class="status-indicator" id="statusIndicator">üîÑ –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>
    </div>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Three.js –¥–ª—è 3D –≥—Ä–∞—Ñ–∏–∫–∏ -->
    <script type="module">
      import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';
      import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/OrbitControls.js';
      import { GLTFLoader } from 'https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/loaders/GLTFLoader.js';
      
      // –î–µ–ª–∞–µ–º THREE –¥–æ—Å—Ç—É–ø–Ω—ã–º –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
      window.THREE = THREE;
      window.OrbitControls = OrbitControls;
      window.GLTFLoader = GLTFLoader;
    </script>

    <script>
      // ===== –°–û–ó–î–ê–ù–ò–ï –û–°–ù–û–í–ù–´–• –ö–û–ú–ü–û–ù–ï–ù–¢–û–í –°–¶–ï–ù–´ =====
      
      // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é 3D —Å—Ü–µ–Ω—É
      const scene = new THREE.Scene();
      // –£–±–∏—Ä–∞–µ–º —Ñ–æ–Ω —Å—Ü–µ–Ω—ã (–±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –≥—Ä–∞–¥–∏–µ–Ω—Ç –∏–∑ CSS)
      scene.background = null;

      // –°–æ–∑–¥–∞–µ–º –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—É—é –∫–∞–º–µ—Ä—É —Å —É–≥–ª–æ–º –æ–±–∑–æ—Ä–∞ 50¬∞, —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º —Å—Ç–æ—Ä–æ–Ω —ç–∫—Ä–∞–Ω–∞ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –≤–∏–¥–∏–º–æ—Å—Ç–∏ 1-1000
      const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –∫–∞–º–µ—Ä—ã –≤ —Ç–æ—á–∫–µ (0, 0, 30)
      camera.position.set(0, 0, 20);

      // –°–æ–∑–¥–∞–µ–º WebGL —Ä–µ–Ω–¥–µ—Ä–µ—Ä —Å –∞–Ω—Ç–∏–∞–ª–∏–∞—Å–∏–Ω–≥–æ–º
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞ —Ä–∞–≤–Ω—ã–º —Ä–∞–∑–º–µ—Ä—É –æ–∫–Ω–∞
      renderer.setSize(window.innerWidth, window.innerHeight);
      // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–Ω–¥–µ—Ä–µ—Ä –≤ DOM
      document.body.appendChild(renderer.domElement);

      // –°–æ–∑–¥–∞–µ–º OrbitControls –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π –º—ã—à—å—é
      const controls = new OrbitControls(camera, renderer.domElement);
      // –í–∫–ª—é—á–∞–µ–º –ø–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
      controls.enableDamping = true;
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞—Ç—É—Ö–∞–Ω–∏—è –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
      controls.dampingFactor = 0.05;

      // ===== –û–°–í–ï–©–ï–ù–ò–ï –°–¶–ï–ù–´ =====
      
      // –°–æ–∑–¥–∞–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–≤–µ—Ç (–∫–∞–∫ —Å–æ–ª–Ω—Ü–µ)
      const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é —Å–≤–µ—Ç–∞
      directionalLight.position.set(10, 10, 5);
      // –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–µ—Ç –≤ —Å—Ü–µ–Ω—É
      scene.add(directionalLight);

      // –°–æ–∑–¥–∞–µ–º –æ–∫—Ä—É–∂–∞—é—â–∏–π —Å–≤–µ—Ç –¥–ª—è –º—è–≥–∫–æ–≥–æ –æ—Å–≤–µ—â–µ–Ω–∏—è
      const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
      // –î–æ–±–∞–≤–ª—è–µ–º –æ–∫—Ä—É–∂–∞—é—â–∏–π —Å–≤–µ—Ç –≤ —Å—Ü–µ–Ω—É
      scene.add(ambientLight);

      // ===== –ó–ê–ì–†–£–ó–ö–ê –ú–û–î–ï–õ–ò =====
      
      // –°–æ–∑–¥–∞–µ–º –∑–∞–≥—Ä—É–∑—á–∏–∫ GLTF –º–æ–¥–µ–ª–µ–π
      const loader = new GLTFLoader();
      
      // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≥–æ–ª–æ–≤—ã
      let headGroup = null;
      let headMesh = null;
      let eyePlane = null;
      let allEyePlanes = [];

      // –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥–µ–ª—å –∏–∑ —Ñ–∞–π–ª–∞ model.glb
      console.log('üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥–µ–ª–∏...');
      loader.load('model.glb',
        // –§—É–Ω–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
        (gltf) => {
          console.log('üé¨ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º...');
          
          // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –º–æ–¥–µ–ª—å –≤ 5 —Ä–∞–∑ –ø–æ –≤—Å–µ–º –æ—Å—è–º
          gltf.scene.scale.set(5, 5, 5);
          
          // –î–æ–±–∞–≤–ª—è–µ–º –º–æ–¥–µ–ª—å –≤ —Å—Ü–µ–Ω—É
          scene.add(gltf.scene);

          // –ò—â–µ–º –≥—Ä—É–ø–ø—É –≥–æ–ª–æ–≤—ã –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É
          gltf.scene.traverse((obj) => {
            if (obj.type === 'Group') {
              console.log(`üë• –ù–∞–π–¥–µ–Ω–∞ –≥—Ä—É–ø–ø–∞: "${obj.name}" —Å ${obj.children.length} –¥–µ—Ç—å–º–∏`);
              
              if (obj.name === 'Golova') {
                headGroup = obj;
                console.log('üé≠ –ù–∞–π–¥–µ–Ω–∞ –≥—Ä—É–ø–ø–∞ –≥–æ–ª–æ–≤—ã:', obj.name);
              }
            } else if (obj.type === 'Mesh') {
              console.log(`üì¶ –ù–∞–π–¥–µ–Ω –º–µ—à: "${obj.name}"`);
            }
          });

          console.log('‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
          updateStatusIndicator('‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        },
        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        (progress) => {
          const percent = (progress.loaded / progress.total * 100).toFixed(0);
          console.log(`üì• –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏: ${percent}%`);
          updateStatusIndicator(`üì• –ó–∞–≥—Ä—É–∑–∫–∞: ${percent}%`);
        },
        // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
        (error) => {
          console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏:', error);
          updateStatusIndicator('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏');
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ—à–∏–±–∫–∏
          if (error.message.includes('404')) {
            console.error('üí° –í–æ–∑–º–æ–∂–Ω–æ, —Ñ–∞–π–ª model.glb –Ω–µ –Ω–∞–π–¥–µ–Ω. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ, —á—Ç–æ –∏ HTML —Ñ–∞–π–ª.');
            updateStatusIndicator('‚ùå –§–∞–π–ª model.glb –Ω–µ –Ω–∞–π–¥–µ–Ω');
          } else if (error.message.includes('CORS')) {
            console.error('üí° –ü—Ä–æ–±–ª–µ–º–∞ —Å CORS. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, Live Server –≤ VS Code).');
            updateStatusIndicator('‚ùå –û—à–∏–±–∫–∞ CORS - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä');
          }
        }
      );

      // ===== –ì–õ–ê–í–ù–´–ô –¶–ò–ö–õ –ê–ù–ò–ú–ê–¶–ò–ò =====
      
      // –§—É–Ω–∫—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
      function animate() {
        // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∫–∞–¥—Ä –∞–Ω–∏–º–∞—Ü–∏–∏
        requestAnimationFrame(animate);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º OrbitControls
        controls.update();
        
        // –†–µ–Ω–¥–µ—Ä–∏–º —Å—Ü–µ–Ω—É
        renderer.render(scene, camera);
      }

      // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
      animate();

      // ===== –§–£–ù–ö–¶–ò–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø =====
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–æ–∑–∏—Ü–∏–∏ –≥–æ–ª–æ–≤—ã
      function resetHeadPosition() {
        console.log('üìç –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –≥–æ–ª–æ–≤—ã...');
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –≥—Ä—É–ø–ø—ã –≥–æ–ª–æ–≤—ã
        if (headGroup) {
          headGroup.position.set(0, 0, 0);
          console.log('‚úÖ –ü–æ–∑–∏—Ü–∏—è –≥—Ä—É–ø–ø—ã –≥–æ–ª–æ–≤—ã —Å–±—Ä–æ—à–µ–Ω–∞');
        }
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –º–µ—à–∞ –≥–æ–ª–æ–≤—ã
        if (headMesh) {
          headMesh.position.set(0, 0, 0);
          console.log('‚úÖ –ü–æ–∑–∏—Ü–∏—è –º–µ—à–∞ –≥–æ–ª–æ–≤—ã —Å–±—Ä–æ—à–µ–Ω–∞');
        }
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –≤—Å–µ—Ö –ø–ª–∞—Å—Ç–∏–Ω –≥–ª–∞–∑
        if (allEyePlanes.length > 0) {
          allEyePlanes.forEach((plane, index) => {
            plane.position.set(0, 0, 0);
          });
          console.log(`‚úÖ –ü–æ–∑–∏—Ü–∏—è ${allEyePlanes.length} –ø–ª–∞—Å—Ç–∏–Ω –¥–ª—è –≥–ª–∞–∑ —Å–±—Ä–æ—à–µ–Ω–∞`);
        } else if (eyePlane) {
          // Fallback –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
          eyePlane.position.set(0, 0, 0);
          console.log('‚úÖ –ü–æ–∑–∏—Ü–∏—è –ø–ª–∞—Å—Ç–∏–Ω—ã –≥–ª–∞–∑ —Å–±—Ä–æ—à–µ–Ω–∞');
        } else {
          console.log('‚ö†Ô∏è –ü–ª–∞—Å—Ç–∏–Ω—ã –≥–ª–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
        }
        
        if (!headGroup && !headMesh && !eyePlane) {
          console.log('‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã –æ–±—ä–µ–∫—Ç—ã –≥–æ–ª–æ–≤—ã –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–æ–∑–∏—Ü–∏–∏');
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
        updateStatusIndicator('‚úÖ –ü–æ–∑–∏—Ü–∏—è –≥–æ–ª–æ–≤—ã —Å–±—Ä–æ—à–µ–Ω–∞');
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –≥—Ä—É–ø–ø—ã –ø–æ –∏–º–µ–Ω–∏
      function hideGroup(groupName) {
        console.log(`üëª –°–∫—Ä—ã–≤–∞–µ–º –≥—Ä—É–ø–ø—É "${groupName}"...`);
        
        let found = false;
        
        scene.traverse((obj) => {
          if (obj.type === 'Group' && obj.name === groupName) {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å
            if (!obj.userData.originalVisible) {
              obj.userData.originalVisible = obj.visible;
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≥—Ä—É–ø–ø—É
            obj.visible = false;
            found = true;
            
            console.log(`üëª –°–∫—Ä—ã—Ç–∞ –≥—Ä—É–ø–ø–∞: "${obj.name}"`);
          }
        });
        
        if (found) {
          updateStatusIndicator(`üëª –°–∫—Ä—ã—Ç–∞ –≥—Ä—É–ø–ø–∞ "${groupName}"`);
        } else {
          console.log(`‚ùå –ì—Ä—É–ø–ø–∞ "${groupName}" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`);
          updateStatusIndicator(`‚ùå –ì—Ä—É–ø–ø–∞ "${groupName}" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`);
        }
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
      function updateStatusIndicator(message) {
        const statusIndicator = document.getElementById('statusIndicator');
        if (statusIndicator) {
          statusIndicator.textContent = message;
          
          // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
          if (message.includes('‚úÖ')) {
            statusIndicator.className = 'status-indicator';
          } else if (message.includes('üëª')) {
            statusIndicator.className = 'status-indicator paused';
          } else if (message.includes('‚ùå')) {
            statusIndicator.className = 'status-indicator paused';
          }
        }
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–∫—Ä—ã—Ç—ã—Ö –≥—Ä—É–ø–ø
      function restoreAllGroups() {
        console.log('üîÑ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —Å–∫—Ä—ã—Ç—ã–µ –≥—Ä—É–ø–ø—ã...');
        
        const restoredGroups = [];
        
        scene.traverse((obj) => {
          if (obj.type === 'Group' && obj.userData.originalVisible !== undefined) {
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å
            obj.visible = obj.userData.originalVisible;
            restoredGroups.push(obj.name);
            
            console.log(`üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≥—Ä—É–ø–ø–∞: "${obj.name}" (–≤–∏–¥–∏–º–æ—Å—Ç—å: ${obj.visible})`);
          }
        });
        
        if (restoredGroups.length > 0) {
          console.log(`‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${restoredGroups.length} –≥—Ä—É–ø–ø:`, restoredGroups);
          updateStatusIndicator(`üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${restoredGroups.length} –≥—Ä—É–ø–ø`);
        } else {
          console.log('‚ÑπÔ∏è –ù–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö –≥—Ä—É–ø–ø –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è');
          updateStatusIndicator('‚ÑπÔ∏è –ù–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö –≥—Ä—É–ø–ø');
        }
      }

      // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –≥—Ä—É–ø–ø
      function analyzeGroups() {
        console.log('üîç === –ê–ù–ê–õ–ò–ó –°–û–î–ï–†–ñ–ò–ú–û–ì–û –ì–†–£–ü–ü ===');
        
        let groupCount = 0;
        let meshCount = 0;
        
        scene.traverse((obj) => {
          if (obj.type === 'Group') {
            groupCount++;
            console.log(`\nüë• –ì—Ä—É–ø–ø–∞ ${groupCount}: "${obj.name}"`);
            console.log(`   –î–µ—Ç–∏: ${obj.children.length}`);
            console.log(`   –í–∏–¥–∏–º–æ—Å—Ç—å: ${obj.visible}`);
            
            // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–µ—Ç–µ–π –≥—Ä—É–ø–ø—ã
            obj.children.forEach((child, index) => {
              if (child.type === 'Mesh') {
                meshCount++;
                console.log(`   üë∂ ${index + 1}. –ú–µ—à: "${child.name}" | –í–∏–¥–∏–º–æ—Å—Ç—å: ${child.visible}`);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –ø–ª–∞—Å—Ç–∏–Ω–æ–π –≥–ª–∞–∑
                const isPotentialEyePlane = 
                  child.name.toLowerCase().includes('plane') ||
                  child.name.toLowerCase().includes('eye') ||
                  child.name.toLowerCase().includes('lid') ||
                  child.name.toLowerCase().includes('plate') ||
                  child.name.toLowerCase().includes('cover') ||
                  child.name.toLowerCase().includes('mask') ||
                  child.name.toLowerCase().includes('visor') ||
                  child.name.toLowerCase().includes('screen') ||
                  child.name.toLowerCase().includes('display') ||
                  child.name.toLowerCase().includes('panel') ||
                  child.name.toLowerCase().includes('block') ||
                  child.name.toLowerCase().includes('cube') ||
                  child.name.toLowerCase().includes('box') ||
                  child.name.toLowerCase().includes('rect') ||
                  child.name.toLowerCase().includes('dark') ||
                  child.name.toLowerCase().includes('blue');
                
                if (isPotentialEyePlane) {
                  console.log(`      üéØ –í–û–ó–ú–û–ñ–ù–û –≠–¢–û –ü–õ–ê–°–¢–ò–ù–ê –ì–õ–ê–ó!`);
                }
              } else if (child.type === 'Group') {
                console.log(`   üë∂ ${index + 1}. –ü–æ–¥–≥—Ä—É–ø–ø–∞: "${child.name}" | –î–µ—Ç–∏: ${child.children.length}`);
              }
            });
          }
        });
        
        console.log(`\nüìä –ò–¢–û–ì–û: ${groupCount} –≥—Ä—É–ø–ø, ${meshCount} –º–µ—à–µ–π`);
        console.log('üîç === –ö–û–ù–ï–¶ –ê–ù–ê–õ–ò–ó–ê ===');
        
        updateStatusIndicator(`üîç –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: ${groupCount} –≥—Ä—É–ø–ø, ${meshCount} –º–µ—à–µ–π`);
      }

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
      function testModules() {
        console.log('üß™ === –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ú–û–î–£–õ–ï–ô ===');
        
        const modules = {
          'THREE': typeof THREE !== 'undefined',
          'OrbitControls': typeof OrbitControls !== 'undefined',
          'GLTFLoader': typeof GLTFLoader !== 'undefined'
        };
        
        console.log('üì¶ –°—Ç–∞—Ç—É—Å –º–æ–¥—É–ª–µ–π:', modules);
        
        let allLoaded = true;
        Object.entries(modules).forEach(([name, loaded]) => {
          if (loaded) {
            console.log(`‚úÖ ${name}: –∑–∞–≥—Ä—É–∂–µ–Ω`);
          } else {
            console.log(`‚ùå ${name}: –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω`);
            allLoaded = false;
          }
        });
        
        if (allLoaded) {
          console.log('üéâ –í—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!');
          updateStatusIndicator('üéâ –í—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        } else {
          console.log('‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥—É–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
          updateStatusIndicator('‚ö†Ô∏è –ù–µ –≤—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        }
        
        console.log('üß™ === –ö–û–ù–ï–¶ –¢–ï–°–¢–ê ===');
      }

      window.resetHeadPosition = resetHeadPosition;
      window.hideGroup = hideGroup;
      window.restoreAllGroups = restoreAllGroups;
      window.analyzeGroups = analyzeGroups;
      window.testModules = testModules;

      // ===== –û–ë–†–ê–ë–û–¢–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–Ø –†–ê–ó–ú–ï–†–ê –û–ö–ù–ê =====
      
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
      function onWindowResize() {
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –∫–∞–º–µ—Ä—ã
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞
        renderer.setSize(window.innerWidth, window.innerHeight);
      }

      // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
      window.addEventListener('resize', onWindowResize, false);

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
      if (typeof THREE !== 'undefined' && typeof OrbitControls !== 'undefined' && typeof GLTFLoader !== 'undefined') {
        console.log('üéØ –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ–ª–æ–≤–æ–π –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!');
        updateStatusIndicator('üéØ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ');
      } else {
        console.error('‚ùå –ù–µ –≤—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
        updateStatusIndicator('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π');
      }
    </script>
  </body>
</html>
